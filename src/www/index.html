<!doctype html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>HiChat</title>
    <meta name="description" content="Google's material design UI components built with React.">

    <!-- Use minimum-scale=1 to enable GPU rasterization -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=0, maximum-scale=1, minimum-scale=1"
    >
    <link rel="stylesheet" type="text/css" href="main.css">
  </head>

  <body>
    <div id="app"></div>
    <script src="/socket.io/socket.io.js"></script>
    <script>

      window.onload = function() {
          var hichat = new HiChat();
          hichat.init();
      };
      var HiChat = function() {
          this.socket = null;
      };
      HiChat.prototype = {
          init: function() {
              var that = this;
              this.socket = io.connect();
              window.socket = this.socket;
              // this.socket.on('connect', function() {
                  // document.getElementById('info').textContent = 'put in a nickname :)';
                  // document.getElementById('nickWrapper').style.display = 'block';
                  // document.getElementById('nicknameInput').focus();
              // });
              this.socket.on('nickExisted', function() {
                  // document.getElementById('info').textContent = '!nickname is taken, choose another pls';
              });
              this.socket.on('loginSuccess', function() {
                  // document.title = 'hichat | ' + document.getElementById('nicknameInput').value;
                  // document.getElementById('loginWrapper').style.display = 'none';
                  // document.getElementById('messageInput').focus();
              });
              this.socket.on('error', function(err) {
                  // if (document.getElementById('loginWrapper').style.display == 'none') {
                  //     document.getElementById('status').textContent = '!fail to connect :(';
                  // } else {
                  //     document.getElementById('info').textContent = '!fail to connect :(';
                  // }
              });
              this.socket.on('system', function(nickName, userCount, type) {
                  // var msg = nickName + (type == 'login' ? ' joined' : ' left');
                  // that._displayNewMsg('system ', msg, 'red');
                  // document.getElementById('status').textContent = userCount + (userCount > 1 ? ' users' : ' user') + ' online';
              });
              this.socket.on('newMsg', function(user, msg, color) {
                  // that._displayNewMsg(user, msg, color);
              });
              this.socket.on('newImg', function(user, img, color) {
                  // that._displayImage(user, img, color);
              });
              // document.getElementById('loginBtn').addEventListener('click', function() {
              //     var nickName = document.getElementById('nicknameInput').value;
              //     if (nickName.trim().length != 0) {
              //         that.socket.emit('login', nickName);
              //     } else {
              //         document.getElementById('nicknameInput').focus();
              //     };
              // }, false);
              // document.getElementById('nicknameInput').addEventListener('keyup', function(e) {
              //     if (e.keyCode == 13) {
              //         var nickName = document.getElementById('nicknameInput').value;
              //         if (nickName.trim().length != 0) {
              //             that.socket.emit('login', nickName);
              //         };
              //     };
              // }, false);
              // document.getElementById('sendBtn').addEventListener('click', function() {
              //     var messageInput = document.getElementById('messageInput'),
              //         msg = messageInput.value,
              //         color = document.getElementById('colorStyle').value;
              //     messageInput.value = '';
              //     messageInput.focus();
              //     if (msg.trim().length != 0) {
              //         that.socket.emit('postMsg', msg, color);
              //         that._displayNewMsg('me', msg, color);
              //         return;
              //     };
              // }, false);
              // document.getElementById('messageInput').addEventListener('keyup', function(e) {
              //     var messageInput = document.getElementById('messageInput'),
              //         msg = messageInput.value,
              //         color = document.getElementById('colorStyle').value;
              //     if (e.keyCode == 13 && msg.trim().length != 0) {
              //         messageInput.value = '';
              //         that.socket.emit('postMsg', msg, color);
              //         that._displayNewMsg('me', msg, color);
              //     };
              // }, false);
              // document.getElementById('clearBtn').addEventListener('click', function() {
              //     document.getElementById('historyMsg').innerHTML = '';
              // }, false);
             },
          // _displayNewMsg: function(user, msg, color) {
          //     var container = document.getElementById('historyMsg'),
          //         msgToDisplay = document.createElement('p'),
          //         date = new Date().toTimeString().substr(0, 8);
          //     msgToDisplay.style.color = color || '#000';
          //     msgToDisplay.innerHTML = user + '<span class="timespan">(' + date + '): </span>' + msg;
          //     container.appendChild(msgToDisplay);
          //     container.scrollTop = container.scrollHeight;
          // },
      };
    </script>
    <script src="http://39.106.120.116:3000/app.js" type="text/javascript"></script>
  </body>
</html>
